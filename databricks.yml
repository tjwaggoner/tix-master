# Databricks Asset Bundle Configuration
# This file defines the deployment configuration for the Ticketmaster Medallion Architecture

bundle:
  name: ticketmaster-medallion

include:
  - databricks-asset-bundles/resources/jobs-simple.yml

variables:
  environment:
    description: Environment name
    default: dev

  catalog:
    description: Unity Catalog name
    default: ticketmaster

  warehouse_id:
    description: SQL Warehouse ID for queries
    default: ${var.default_warehouse_id}

  default_warehouse_id:
    description: Default SQL Warehouse ID
    default: f4040a30fe978741

  cluster_node_type:
    description: Node type for job clusters
    default: i3.xlarge

targets:
  # Development environment
  dev:
    mode: development
    default: true
    workspace:
      host: https://fe-vm-tw-vdm-serverless-tixsfe.cloud.databricks.com
      profile: tix-master

    variables:
      environment: dev
      catalog: ticketmaster_dev
      default_warehouse_id: f4040a30fe978741

  # Production environment
  prod:
    mode: production
    workspace:
      host: https://fe-vm-tw-vdm-serverless-tixsfe.cloud.databricks.com
      root_path: /Workspace/Production/ticketmaster-medallion

    variables:
      environment: prod
      catalog: ticketmaster

    # Require manual approval for production
    run_as:
      service_principal_name: ticketmaster-prod-sp
